<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=9"/>
	<meta name="generator" content="Doxygen 1.8.11"/>
	<title>SAVIME: Main Page</title>
	<link href="tabs.css" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="dynsections.js"></script>
	<link href="search/search.css" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" src="search/searchdata.js"></script>
	<script type="text/javascript" src="search/search.js"></script>
	<script type="text/javascript">
        $(document).ready(function() { init_search(); });
	</script>
	<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
	<div id="titlearea">
		<table cellspacing="0" cellpadding="0">
			<tbody>
			<tr style="height: 56px;">
				<td id="projectalign" style="padding-left: 0.5em;">
					<div id="projectname">SAVIME
					</div>
				</td>
			</tr>
			</tbody>
		</table>
	</div>
	<!-- end header part -->
	<!-- Generated by Doxygen 1.8.11 -->
	<script type="text/javascript">
        var searchBox = new SearchBox("searchBox", "search",false,'Search');
	</script>
	<div id="navrow1" class="tabs">
		<ul class="tablist">
			<li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
			<li><a href="namespaces.html"><span>Namespaces</span></a></li>
			<li><a href="annotated.html"><span>Classes</span></a></li>
			<li><a href="files.html"><span>Files</span></a></li>
			<li><a href="contribute.html"><span>Contribute</span></a></li>
			<li>
				<div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
			   onmouseover="return searchBox.OnSearchSelectShow()"
			   onmouseout="return searchBox.OnSearchSelectHide()"
			   alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
				 onfocus="searchBox.OnSearchFieldFocus(true)"
				 onblur="searchBox.OnSearchFieldFocus(false)"
				 onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
				</div>
			</li>
		</ul>
	</div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
	 onmouseover="return searchBox.OnSearchSelectShow()"
	 onmouseout="return searchBox.OnSearchSelectHide()"
	 onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
	<iframe src="javascript:void(0)" frameborder="0"
			name="MSearchResults" id="MSearchResults">
	</iframe>
</div>

<div class="header">
	<div class="headertitle">
		<div class="title">SAVIME Documentation</div>  </div>
</div><!--header-->
<div class="contents">
</div>

<style media="screen" type="text/css">
	#wrapper {
		background-color: auto; /* for vizualization purposes */

	}
	#subdiv {
		width: 70%;
		margin: 0 auto
	}
	.headline {
		font-family: Calibri, "Helvetica", san-serif;
		line-height: 1.5em;
		color: black;
		font-size: 30px;
	}
	h2:after
	{
		content:' ';
		display:block;
		border:2px solid black;
	}
	.codebox {
		border:1px solid black;
		background-color:#EEEEFF;
		white-space: pre-line;
		width: 100%;
		padding:5px;
		font-size:0.9em;
		display: inline-block;
	}

</style>

<div class="contents" id="wrapper">
	<div class="contents" id="subdiv">

		<h2><span class="headline">Introduction</span></h2>

		SAVIME (Simulation Analysis and Visualization In MEmory) is a DBMS-like system that stores data in the format of typed multidimensional arrays. It is desgined to help querying and vizualize 		numerical simulation data. However, it can also be used as an analytical in-memory array database management system. SAVIME is at early development stages, and supports only a handful of 		operations. But it is already able to perform many tasks, even for large datasets in memory.

		<h2><span class="headline">Compiling and Running</span></h2>

		To install SAVIME, you need to clone the git repository and compile it in your environment.

		<br> <h3>Prerequesites</h3>

		The following packages must be installed for successfully compiling and running SAVIME:

		<code class="codebox">sudo apt install git
			sudo apt install cmake
			sudo apt install libboost-dev
                        sudo apt install libboost-regex-dev
                        sudo apt install libboost-iostreams-dev
			sudo apt install libcurl4-openssl-dev
			sudo apt install libjsoncpp-dev
		</code>
		<br> It is also advisable to install  other packages depending on intended usage. In order to have
		a better performance in some operations, SAVIME uses TBB, which can be installed as follows:
		<code class="codebox">sudo apt-get install libtbb-dev
		</code>

		If it is necessary to change the base of SAVIME grammar, then, the following
		packages (bison and flex) are required.

		<code class="codebox">sudo apt install bison
			sudo apt install flex			
		</code>

		If the experimental RDMA support is required, then it is necessary to install the following package:

		<code class="codebox"> sudo apt install librdmacm-dev
		</code>

		<br> <h3>Compiling and running SAVIME</h3>

		Once you have all dependencies are installed, clone the repository:

		<br> <code class="codebox"> git clone https://github.com/hllustosa/Savime </code>

		<br> <br> Create a separate build directory, configure and build SAVIME:

		<br><code class="codebox"> mkdir savime-build
		cd savime-build
		cmake ${SAVIME_BUILD} -DCMAKE_BUILD_TYPE=Release
		make -j 4
		sudo make install
	</code>
		Where  ${SAVIME_BUILD} is the path where the SAVIME repository is in your environment.

		<br><br>Once it is done, you can Run the SAVIME server by typing:

		<br><code class="codebox"> savime
	</code>

		<br><br>You can also call the savime client with your desired query by typing:

		<br><code class="codebox"> savimec 'your query;'
	</code>

		<br><br>You can test savime by running these commands from savime build directory:
		<br><code class="codebox"> cd ${SAVIME_BUILD}/examples
		savime -D
		./test_savime.sh
	</code>

		<br> Where the option -D makes Savime Run as a daemon. You should see the outputs of various
		samples of queries in teste_savime.sh file.

		You can finish Savime by running:
		<code class="codebox"> savimec -k
		</code>

		<br> <h3>Compiling and running SAVIME with catalyst support</h3>

		To build and running SAVIME with catalyst support, it is first necessary to have built Paraview. To do so, first install these dependencies:

		<br><code class="codebox"> sudo apt install cmake-curses-gui
		sudo apt-get install freeglut3-dev
	</code>

		<br><br>Clone Paraview's repository and update the submodules:

		<br><code class="codebox"> git clone https://gitlab.kitware.com/paraview/paraview.git
		cd paraview
		git submodule update --init --recursive
		git pull
		git submodule update
	</code>

		<br><br>Now, create a separated build directory and configure Paraview. While configuring, don't forget to set the following parameters: PARAVIEW_USE_MPI=off, PARAVIEW_ENABLE_PYTHON=on,  		 PARAVIEW_BUILD_QT=off and PARAVIEW_INSTALL_DEVELOPMENT_F=on. For more info, check the <a href="https://www.paraview.org/Wiki/ParaView:Build_And_Install">Paraview's Documentation</a>.
		<br><code class="codebox"> mkdir paraview_build
		cd paraview_build
		ccmake ../paraview
	</code>

		<br><br> Compile Paraview:

		<br><code class="codebox"> make -j 4
		sudo make install
	</code>

		<br><br>VTK library files for catalyst are installed in /usr/local/lib. You should add this to your PATH variable. To do this for a single session, Run:

		<code class="codebox"> export LD_LIBRARY_PATH=/lib:/usr/lib:/usr/local/lib
		</code>

		<br><br>Or add /usr/local/lib to /etc/ld.so.conf to make the changes permanent. Once you finished this,
		you should compile SAVIME set configure parameter to enable catalyst. Like this:

		<br><code class="codebox"> mkdir savime-build
		cd savime-build
		cmake ${SAVIME_BUILD} -DCMAKE_BUILD_TYPE=Release -DBUILD_WITH_CATALYST=yes
		make -j 4
		sudo make install
	</code>

		<br><br>Finally, you can test it by running these commands from savime build directory:

		<br><code class="codebox"> cd examples
		savime -D -b ${SAVIME_BUILD}/etc/savime.boot
		./test_savime_catalyst.sh
	</code>

		After running it for a while you should see a bunch of PVTU files in examples/viz directory. They contain
		a visualization for a numerical simulation compatible with Paraview.

		<h2><span class="headline">Operators</span></h2>

		The following operators shown here are currently supported by SAVIME. We start describing the DDL operators, the are responsible for creating and removing the basic structures in SAVIME,
		such as a TAR or a DATASET. In SAVIME, data is ingested into DATASETS, and then these DATASETs are attached to SUBTAR in a given TAR via the load_subtar command. Thefore, the main operators
		are:
		<br> <h3>CREATE_TAR</h3>
		<code class="codebox">CREATE_TAR("tar_name", "type_name", "(dimensions_block)", "(attributes_block)", ["(roles_block)"]);
		</code>

		<br> <h3>CREATE_TYPE</h3>
		<code class="codebox">CREATE_TYPE("[type_name](mandatory_role1, mandatory_role2, *non_mandatory_role3, ..., roleN)");
		</code>

		<br> <h3>CREATE_DATASET</h3>
		<code class="codebox">CREATE_DATASET("name:type", "data_file_path");
			CREATE_DATASET("name:type", "literal dataset");
			CREATE_DATASET("name:type", "initial:spacing:final");
		</code>

		<br> <h3>LOAD_SUBTAR</h3>
		<code class="codebox">LOAD_SUBTAR("tar_name", "dimension_specs", "dataset_specs");
		</code>

		<br> <h3>DROP_*</h3>
		<code class="codebox">DROP_TAR("tar_name");
			DROP_TYPE("type_name");
			DROP_DATASET("dataset_name");
		</code>

		<p>SAVIME supports a range of very common DML operator that when combine can create the most varied queries. These DML operators are:

			<br> <h3>SCAN</h3>
		Executes query and iterates through the result without sending it to the client. Used for measuring query execution time.
		<code class="codebox">SCAN(tar); </code>

		<br> <h3>SELECT</h3>
		Projects a subset of dimensions and attributes of a TAR.
		<code class="codebox">SELECT(tar, data_element1, data_element2, ..., data_element_n); </code>

		<br> <h3>WHERE</h3>
		Filters data according to a complex logical predicate.
		<code class="codebox">WHERE(tar, logical_predicate); </code>

		<br> <h3>SUBSET</h3>
		Clips a TAR by limiting a range of values for its dimensions. Possibly more efficient than WHERE in most cases.
		<code class="codebox">SUBSET(tar, dim1, lower_bound1, upper_bound1, lower_bound2, upper_bound2, ..., lower_bound_n, upper_bound_n); </code>

		<br> <h3>DERIVE</h3>
		Creates a new derived attribute by calculating an arithmetic expressions involving indexes values. attributes, constants, arithmetic operations and functions.
		<code class="codebox">DERIVE(tar, new_attribute_name, arithmetic expression); </code>

		<br> <h3>CROSS</h3>
		Creates the cartesion products of cells in the left and right array. The resulting array has a number of dimensions and attributes equal to the sum of dimensions in both left and right TARs.
		<code class="codebox">CROSS(left_tar, right_tar); </code>

		<br> <h3>DIMJOIN</h3>
		Creates a TAR as the junction of attributes between two tars by matching pairs of dimensions.
		<code class="codebox">DIMJOIN(left_tar, right_tar, left_tar_dim1, right_tar_dim1, left_tar_dim2, right_tar_dim2, ..., left_tar_dim_n, right_tar_dim_n, ); </code>

		<br> <h3>AGGREGATE</h3>
		Group attribute and dimension values by dimensions and calculate aggregation functions.
		<code class="codebox">AGGREGATE(tar, agg_func1, data_element1, new_attribute1, ..., agg_func_n, data_element_n, new_attribute_n, dimension1, dimension2, ..., dimension_n ); </code>

		<br> Some special operator complete the set of possibilites currently available in SAVIME. They are:

		<br> <h3>STORE</h3>
		Maintains the result of a query into the system, thus making it available for futher analysis.
		<code class="codebox">STORE(savime_dml_query, "new_tar_name"); </code>

		<br> <h3>CATALYZE</h3>
		Create files for being vizualized in PARAVIEW or call CATALYST scripts for analysis.
		<code class="codebox">CATALYZE(field_data_tar1, [geometry_tar], [topology_tar], [catalyst_script], output_dir) </code>

	</div>
</div>
<br>
<br>
<br>

<!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
	Generated by &#160;<a href="http://www.doxygen.org/index.html">
	<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
